<!DOCTYPE html>
<head>
        <meta charset = "UTF_8"/>
        <title>CGSG</title>
        <link rel="stylesheet" href="./css/style.css"/>
        <!--<script type="text/javascript" src="./ui.js"></script>--
        <script src="https://requirejs.org/docs/release/2.3.5/minified/require.js"></script>
        <script src='./node_modules/pngjs/lib/png.js'> // Libs imports
            //import { PNG } from ;
        </script>-->
    </head>
    <body>
        <div class="support">
            <img id="imageLoader" src="./models/default_tex.png"></img>
        </div>
        <div class="header">
            <div class="title">
                <canvas id="logoCanvas" width=200 height=100></canvas>
                <h1 class="title">cgsg ae4 site?</h1>
            </div>
            <!--<script type="module">               // Logo render
                import {vec3, matr} from "./math.js";
                //import * as PNG from "./node_modules/pngjs/browser.js";
                //import pngjs from "./package.json";
                //import * as PNG from 'pngjs';
                
                import * as render from "./render/render.js";

                //var PNG = require("pngjs");
    
                var logo_rnd = new render.Render("logoCanvas");
                
                var logo_defCamPos = new vec3(0.4374, 0.827, 3.30);
    
                var logo_camera = new render.Camera(logo_rnd,
                logo_defCamPos, new vec3(0.4, -0.1, 0), new vec3(0, 1, 0), 0);
    
                // Shader
                var logo_shader = new render.Shader();
                
                await logo_shader.loadShader(logo_rnd, 'logo');
                
                // Topology
    
                var logo_cgsgTor = new render.Model(logo_rnd, logo_shader, render.Topology.createCube());
                var logo_cgsgText = new render.Model(logo_rnd, logo_shader, render.Topology.createCube());
    
                await logo_cgsgTor.load(logo_rnd, logo_shader, "./models/cgsg_tor.obj");
                await logo_cgsgText.load(logo_rnd, logo_shader, "./models/cgsg_text.obj");

                logo_cgsgTor.prims.forEach((elem)=>{
                    elem.drawType = logo_rnd.gl.LINE_STRIP;
                });

                var cameraTargetPos = logo_defCamPos;

                window.onmousemove = (e)=>{

                    var delta = new vec3(-e.x + logo_rnd.canvas.offsetLeft + logo_rnd.canvas.offsetWidth / 2, e.y - logo_rnd.canvas.offsetTop - logo_rnd.canvas.offsetHeight / 2, 0);

                    if (delta.length() != 0)
                        cameraTargetPos = logo_defCamPos.add(delta.normalise());
                };
    
                var logo_TmpCounter = 0;
    
                // UBO
                window.setInterval((e)=>{
                    logo_camera.updateSize(logo_rnd);
                    logo_camera.pos = logo_camera.pos.add(cameraTargetPos.sub(logo_camera.pos).mulNum(0.1));
                    logo_camera.update();
                    logo_cgsgTor.draw(logo_rnd, logo_camera, matr.rotateY(0.007 * logo_TmpCounter).mul(matr.rotateX(-3.14 / 4)));
                    logo_cgsgTor.draw(logo_rnd, logo_camera, matr.rotateY(0.007 * logo_TmpCounter).mul(matr.rotateX(3.14 / 4)).mul(matr.translate(new vec3(1, 0, 0))));
    
                    logo_cgsgText.draw(logo_rnd, logo_camera, matr.rotateX(3.14 / 2).mul(matr.translate(new vec3(0.5, 0, 1))));
                    logo_TmpCounter++;
                }, 10);
              </script>-->
            <p class="description">Now this site has only one project.
                I'm going to add a project selector soon.
                At the moment this page has two canvases, each has:<br/>
                - Camera<br/>
                - Models<br/>
                - Materials<br/>
                - Костыль lighting<br/>
                Also I have beautiful css and several sliders at right bottom.<br/>
                </p>
        </div>
        <div class="section">
            <canvas id="mainCanvas">
              <script type="module">
                import {vec3, matr} from "./math.js";
                
                import * as render from "./render/render.js";
                import {DirLight} from "./render/light.js";
    
                var rnd = new render.Render("mainCanvas");
                await rnd.init();
    
                var cgsgTor = await rnd.createModel("./models/cgsg_tor2.obj");
                var cgsgText = await rnd.createModel("./models/tex_cow/tex_cow.obj");

                var TmpCounter = 0;

                var dirL2 = new DirLight(rnd, [1, 1, 1], [1, 1, 0], 1);
                var dirL1 = new DirLight(rnd, [-1, -1, 1], [1, 0, 1], 1);
    
                window.setInterval(()=>{
                    rnd.drawModel(cgsgText, matr.translate(new vec3(0, 0, 0)));

                    rnd.render();

                    TmpCounter++;
                }, 10);
              </script>
            </canvas>
            <div class="article">
                <h2>Settings?</h2>
                <p>Here you can change some sliders or variables, but this text is just for a beautiful alignment.</p>
                <label for="testButton">Click me button:
                    <input type="button" id="testButton" value="Click me"/>
                </label><br/>
                
                <label>Radio button:</label><br/>
                <label for="testRadio1">1:
                    <input type="radio" name="testRadio" id="testRadio1"/>
                </label><br/>
                <label for="testRadio2">2:
                    <input type="radio" name="testRadio" id="testRadio2"/>
                </label><br/>
                <label for="testRadio3">3:
                    <input type="radio" name="testRadio" id="testRadio3"/>
                </label><br/>
                
                <label for="testRange">Test range:
                <input type="range" id="testRange" min="-1" max="1" step="0.1"/>
                </label><br/>
                <div id="testSliders" class="article"></div>
    
                <!--<label for="testCheckBox">Test check box:</label>
                <input type="checkbox" id="testCheckBox"/><br/>
    
                <label for="testColorPicker">Choose the color:</label>
                <input type="color" id="testColorPicker"/><br/>
    
                <label for="testText">Print some text:</label>
                <input type="text" id="testText" value="Text?"/><br/>-->
            </div>
        </div>
    </body>
</html>